<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–ªè³‡å°å¹«æ‰‹ â˜€ï¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #fff9f0; /* æš–å¥¶æ²¹åº•è‰² */
            --card-bg: #ffffff;
            --primary-orange: #ff9f43;
            --sunny-yellow: #feca57;
            --mint-green: #1dd1a1;
            --text-main: #576574;
            --accent-gradient: linear-gradient(135deg, #ff9f43 0%, #feca57 100%);
            --shadow: 0 10px 25px rgba(255, 159, 67, 0.15);
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            margin: 0;
        }

        .container {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 24px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 580px;
            border: 4px solid #fff; /* ç™½è‰²å…§é‚Šæ¡†å¢åŠ ç²¾ç·»æ„Ÿ */
        }

        h2 {
            text-align: center;
            color: var(--primary-orange);
            font-weight: 700;
            margin-bottom: 30px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* å€å¡Šæ¨™é¡Œç¾åŒ– */
        .section-header {
            background-color: #fff4e6;
            color: #e67e22;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9em;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
        }

        td {
            padding: 12px 10px;
        }

        .label-col {
            width: 45%;
            font-weight: 500;
            color: #8395a7;
        }

        /* è¼¸å…¥æ¡†ç¾åŒ– */
        select, input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #f1f2f6;
            border-radius: 12px;
            font-size: 1em;
            background-color: #fdfdfd;
            transition: all 0.3s ease;
            color: var(--text-main);
            outline: none;
        }

        select:focus, input:focus {
            border-color: var(--sunny-yellow);
            background-color: #fff;
            box-shadow: 0 0 8px rgba(254, 202, 87, 0.3);
        }

        input:disabled {
            background-color: #f9f9f9;
            border-color: #eee;
            color: #c8d6e5;
            cursor: not-allowed;
        }

        /* è–ªè³‡çµæœé¡¯ç¤ºæ ¼ */
        .res-input {
            border: 2px solid #e0e0e0;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
        }

        .res-total {
            color: var(--mint-green) !important;
            border-color: var(--mint-green) !important;
            font-size: 1.2em;
            background-color: #f0fff4 !important;
        }

        /* æŒ‰éˆ•ç¾åŒ– */
        .btn-container {
            margin-top: 10px;
        }

        button {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: 700;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 15px rgba(255, 159, 67, 0.3);
        }

        button:hover:not(:disabled) {
            transform: scale(1.02);
            filter: brightness(1.05);
            box-shadow: 0 8px 20px rgba(255, 159, 67, 0.4);
        }

        button:active:not(:disabled) {
            transform: scale(0.98);
        }

        button:disabled {
            background: #dcdde1;
            box-shadow: none;
            cursor: not-allowed;
            color: #f5f6fa;
        }

        /* è¨ˆç®—éç¨‹ç¾åŒ– */
        #processBox {
            margin-top: 30px;
            padding: 25px;
            background-color: #fffdf0;
            border-radius: 20px;
            border: 2px dashed #feca57;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .process-title {
            color: var(--primary-orange);
            font-weight: 700;
            margin-bottom: 15px;
            display: block;
        }

        .step-item {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #f9f1d7;
            font-size: 0.95em;
        }

        .step-item:last-child { border-bottom: none; }

        .highlight-num {
            color: #ee5253;
            font-weight: 700;
            padding: 0 4px;
        }

        .badge {
            background: #576574;
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.8em;
            margin-right: 5px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>è–ªè³‡è¨ˆç®—å°å¹«æ‰‹ ğŸŒ¤ï¸</h2>
    
    <div class="section-header">STEP 1. åŸºæœ¬è³‡æ–™</div>
    <table>
        <tr>
            <td class="label-col">ä»£èª²æœˆä»½ (A)</td>
            <td>
                <select id="fieldA" onchange="validateForm()">
                    <option value="">é¸æ“‡æœˆä»½</option>
                    <script>for(let i=1; i<=12; i++) document.write(`<option value="${i}">${i}æœˆ</option>`);</script>
                </select>
            </td>
        </tr>
        <tr>
            <td class="label-col">èº«ä»½åˆ¥ (B)</td>
            <td>
                <select id="fieldB" onchange="validateForm()">
                    <option value="">é¸æ“‡èº«ä»½</option>
                    <option value="A">èº«åˆ† A</option>
                    <option value="B">èº«åˆ† B</option>
                </select>
            </td>
        </tr>
        <tr>
            <td class="label-col">ä»£å½©è™¹ç­ (G)</td>
            <td>
                <select id="fieldG" onchange="validateForm()">
                    <option value="">è«‹é¸æ“‡</option>
                    <option value="å¦">å¦</option>
                    <option value="æ˜¯">æ˜¯</option>
                </select>
            </td>
        </tr>
    </table>

    <div class="section-header">STEP 2. è¼¸å…¥èˆ‡çµæœ</div>
    <table>
        <tr>
            <td class="label-col">éå…¨æ—¥ç¸½æ™‚æ•¸ (C)</td>
            <td><input type="number" id="fieldC" placeholder="é¸å¡« (é è¨­ 0)"></td>
        </tr>
        <tr>
            <td class="label-col">å…¨æ—¥ç¸½å¤©æ•¸ (D)</td>
            <td>
                <select id="fieldD">
                    <option value="0">é¸å¡« (é è¨­ 0 å¤©)</option>
                    <script>for(let i=1; i<=31; i++) document.write(`<option value="${i}">${i}å¤©</option>`);</script>
                </select>
            </td>
        </tr>
        <tr>
            <td class="label-col">éå…¨æ—¥ç¸½è–ªè³‡ (E)</td>
            <td><input type="text" id="fieldE" class="res-input" disabled value="0"></td>
        </tr>
        <tr>
            <td class="label-col">å…¨æ—¥ç¸½è–ªè³‡ (F)</td>
            <td><input type="text" id="fieldF" class="res-input" disabled value="0"></td>
        </tr>
        <tr>
            <td class="label-col">ğŸ’° æœˆç¸½è–ªè³‡ (H)</td>
            <td><input type="text" id="fieldH" class="res-input res-total" disabled value="0"></td>
        </tr>
    </table>

    <div class="btn-container">
        <button id="calcBtn" disabled onclick="calculate()">âœ¨ é–‹å§‹è¨ˆç®—è–ªæ°´</button>
    </div>

    <div id="processBox">
        <span class="process-title">ğŸ“ è¨ˆç®—éç¨‹ç­†è¨˜ï¼š</span>
        <div id="processText"></div>
    </div>
</div>

<script>
    function getDaysInMonth(month) {
        if (month == 2) return 28;
        return new Date(2026, month, 0).getDate();
    }

    function validateForm() {
        const a = document.getElementById('fieldA').value;
        const b = document.getElementById('fieldB').value;
        const g = document.getElementById('fieldG').value;
        document.getElementById('calcBtn').disabled = !(a && b && g);
    }

    function calculate() {
        const month = parseInt(document.getElementById('fieldA').value);
        const identity = document.getElementById('fieldB').value;
        const rainbow = document.getElementById('fieldG').value;
        const hoursC = parseInt(document.getElementById('fieldC').value) || 0;
        const daysD = parseInt(document.getElementById('fieldD').value) || 0;

        // E è¨ˆç®—
        const resE = hoursC * 190;
        let proc = `<div class="step-item"><span class="badge">E</span> <b>éå…¨æ—¥ï¼š</b>${hoursC} å°æ™‚ Ã— 190 = <span class="highlight-num">${resE.toLocaleString()}</span> å…ƒ</div>`;

        // F è¨ˆç®—
        const monthDays = getDaysInMonth(month);
        let multiplier = 0;
        let baseText = "";
        let bonus = (rainbow === "æ˜¯") ? 20 : 0;

        if (identity === "A") {
            const mapA = { 31: 1800+96, 30: 1861+100, 29: 1925+103, 28: 1993+107 };
            multiplier = mapA[monthDays];
            baseText = "èº«åˆ† A";
        } else {
            const mapB = { 31: 1354+65, 30: 1399+67, 29: 1447+69, 28: 1499+71 };
            multiplier = mapB[monthDays];
            baseText = "èº«åˆ† B";
        }

        const finalRate = multiplier + bonus;
        const resF = daysD * finalRate;

        proc += `<div class="step-item"><span class="badge">F</span> <b>å…¨æ—¥ï¼š</b><br>`;
        proc += `&nbsp;&nbsp;â€¢ ${month}æœˆ(${monthDays}å¤©) + ${baseText} = åŸºæ•¸ ${multiplier}<br>`;
        if(bonus > 0) proc += `&nbsp;&nbsp;â€¢ å½©è™¹ç­åŠ çµ¦ï¼š+20<br>`;
        proc += `&nbsp;&nbsp;â€¢ è¨ˆç®—ï¼š${daysD} å¤© Ã— ${finalRate} = <span class="highlight-num">${resF.toLocaleString()}</span> å…ƒ</div>`;

        // H è¨ˆç®—
        const resH = resE + resF;
        proc += `<div class="step-item" style="color:var(--mint-green)"><b>ğŸ‰ ç¸½è–ªè³‡ï¼š</b>${resE.toLocaleString()} + ${resF.toLocaleString()} = <b>${resH.toLocaleString()}</b> å…ƒ</div>`;

        document.getElementById('fieldE').value = resE.toLocaleString();
        document.getElementById('fieldF').value = resF.toLocaleString();
        document.getElementById('fieldH').value = resH.toLocaleString();
        document.getElementById('processText').innerHTML = proc;
        document.getElementById('processBox').style.display = 'block';
    }
</script>

</body>
</html>